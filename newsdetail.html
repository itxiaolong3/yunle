<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- css reset -->
    <link rel="stylesheet" href="./css/reset.css">
    <!-- 公共common.css -->
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/menu.css">

    <!-- weui -->
    <link rel="stylesheet" href="./css/weui.css">
    <link rel="stylesheet" href="./css/jquery-weui.css">

    <!-- 适配 -->
    <script src="./js/common.js"></script>
    <title>云乐互联</title>
</head>
<body>
<!-- header start -->
<header>
    <div class="topbar-second">
        <span onclick="javascript:history.go(-1)"></span>详细内容
        <i class="back" onclick="javascript:history.go(-1)"></i>
    </div>
</header>
<!-- header end   -->

<!-- main start -->
<div id="main">
    <div class="weui-form-preview">
        <div class="weui-form-preview__hd">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">标题</label>
                <embed class="weui-form-preview__value">我的新闻标题</embed>
            </div>
        </div>
        <div class="contents">
            这里显示富文本
        </div>

    </div>
    <!-- main end   -->
    <!-- footer start -->
</div>
<!-- footer end -->
<!-- jquery -->
<script src="./js/jquery-2.1.4.js"></script>
<script src="./js/jquery-weui.min.js"></script>
<script src="./js/swiper.min.js"></script>
<scritp src="./js/public.js"></scritp>
<script src="./js/vue.js"></script>
<script src="./js/data.js"></script>
<script src="./js/axios.js"></script>
<!---->
<script src="./js/weui.min.js"></script>
<script>
    // import {
    //     ImagePreview
    // } from 'https://cdn.jsdelivr.net/npm/vant@1.5/lib/vant.min.js';
    var vm = new Vue({
        el: "#main",
        data: {
            xieyi: '',
            info:[]
        },
        mounted() {
            this.getinfo();
        },
        methods: {
            showxie: function () {
                let that = this;
                axios.post('http://wxpay.possji.cn/yikehao/getxieyi', {
                    state: 2
                })
                //then里面跟一个成功回调函数
                    .then(function (resp) {
                        if (resp.data.code) {
                            that.info = resp.data.data
                            $.alert("<div style='overflow:scroll; height:400px;'>"+that.info.contents+"</div>",'协议详细');
                        } else {
                            $.toast("无法加载", "text");
                        }
                    })
                    // catch中跟一个失败回调函数
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            getinfo() {
                let that = this;
                var id = getUrlParm('gid');
                axios.post('http://wxpay.possji.cn/yikehao/getdetail', {
                    id: id
                })
                //then里面跟一个成功回调函数
                    .then(function (resp) {
                        if (resp.data.code) {
                            that.info = resp.data.data
                            console.log(that.info);

                        } else {
                            $.toast("无法加载", "text");
                        }

                    })
                    // catch中跟一个失败回调函数
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            pay:function () {
                if(!$('#weuiAgree').is(':checked')){
                    $.toast.prototype.defaults.duration=1000;
                    $.toast("请同意协议",'text');
                    return false
                }else{
                    $.toast("提交", "text");
                }
            }

        }
    })
    function getUrlParm(name) {
        //获取url方法 编辑传来的参数
        //     //之前decodeURI是用的unescape() 有时候会取汉字乱码
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return decodeURI(r[2]);
        return null;
    }
</script>
</body>
</html>