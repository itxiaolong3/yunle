<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- css reset -->
    <link rel="stylesheet" href="./css/reset.css">
    <!-- 公共common.css -->
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/menu.css">

    <!-- weui -->
    <link rel="stylesheet" href="./css/weui.css">
    <link rel="stylesheet" href="./css/jquery-weui.css">

    <!-- 适配 -->
    <script src="./js/common.js"></script>
    <title>Item_wrap</title>
</head>
<body>
<!-- header start -->
<header>
    <div class="topbar-second">
        <span onclick="javascript:history.go(-1)"></span>确认订单
        <i class="back" onclick="javascript:history.go(-1)"></i>
    </div>
</header>
<!-- header end   -->

<!-- main start -->
<div id="main">
<div class="weui-form-preview">
    <div class="weui-form-preview__hd">
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">付款金额</label>
            <em class="weui-form-preview__value">¥2400.00</em>
        </div>
    </div>
    <div class="weui-form-preview__bd">
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">商品</label>
            <span class="weui-form-preview__value">电动打蛋机</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">标题标题</label>
            <span class="weui-form-preview__value">名字名字名字</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">标题标题</label>
            <span class="weui-form-preview__value">很长很长的名字很长很长的名字很长很长的名字很长很长的名字很长很长的名字</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">标题标题</label>
            <span class="weui-form-preview__value">名字名字名字</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">标题标题</label>
            <span class="weui-form-preview__value">名字名字名字</span>
        </div>
        <div class="weui-form-preview__item">
            <label class="weui-form-preview__label">标题标题</label>
            <span class="weui-form-preview__value">名字名字名字</span>
        </div>
    </div>

</div>
<!-- main end   -->
    <!--图片上传-->
    <!--<div class="weui-cells weui-cells_form" id=uploader>-->
        <!--<div class=weui-cell>-->
            <!--<div class=weui-cell__bd>-->
                <!--<div class=weui-uploader>-->
                    <!--<div class=weui-uploader__hd><p class=weui-uploader__title>图片上传</p>-->
                        <!--<div class=weui-uploader__info><span id=uploadCount>0</span>/5</div>-->
                    <!--</div>-->
                    <!--<div class=weui-uploader__bd>-->
                        <!--<ul class=weui-uploader__files id=uploaderFiles></ul>-->
                        <!--<div class=weui-uploader__input-box><input id=uploaderInput class=weui-uploader__input-->
                                                                   <!--type=file accept=image/* capture=camera-->
                                                                   <!--multiple="true"/></div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->

<!-- footer start -->
<footer>
    <div class="order-bar">
        <label for="weuiAgree" class="weui-agree">
            <input id="weuiAgree" type="checkbox" class="weui-agree__checkbox">
            <span class="weui-agree__text">阅读并同意<a :onclick="showxie()">《云乐互联用户协议》</a></span>
        </label>
        <a class="order-sub" >立即支付</a>
    </div>
</footer>
</div>
<!-- footer end -->


<!-- jquery -->
<script src="./js/jquery-2.1.4.js"></script>
<script src="./js/jquery-weui.min.js"></script>
<script src="./js/swiper.min.js"></script>
<scritp src="./js/public.js"></scritp>
<script src="./js/vue.js"></script>
<script src="./js/data.js"></script>
<!---->
<script src="./js/weui.min.js"></script>
<script>
    $(function() {
        var uploadCount = 0,
            uploadList = [];
        var uploadCountDom = document.getElementById("uploadCount");
        weui.uploader('#uploader', {
            url: 'http://wxpay.possji.cn/yikehao/apiLoadimg',
            auto: true,
            type: 'file',
            fileVal: 'fileVal',
            multiple:true,
            compress: {
                width: 1600,
                height: 1600,
                quality: .8
            },
            onBeforeQueued: function onBeforeQueued(files) {
                if (["image/jpg", "image/jpeg", "image/png", "image/gif"].indexOf(this.type) < 0) {
                    _weui2.default.alert('请上传图片');
                    return false;
                }
                if (this.size > 10 * 1024 * 1024) {
                    _weui2.default.alert('请上传不超过10M的图片');
                    return false;
                }
                if (files.length > 5) {
                    // 防止一下子选中过多文件
                    _weui2.default.alert('最多只能上传5张图片，请重新选择');
                    return false;
                }
                if (uploadCount + 1 > 5) {
                    _weui2.default.alert('最多只能上传5张图片');
                    return false;
                }

                ++uploadCount;
                uploadCountDom.innerHTML = uploadCount;
            },
            onQueued: function onQueued() {
                uploadList.push(this);
                console.log(this);
            },
            onBeforeSend: function onBeforeSend(data, headers) {
                console.log(this, data, headers);
                // $.extend(data, { test: 1 }); // 可以扩展此对象来控制上传参数
                // $.extend(headers, { Origin: 'http://127.0.0.1' }); // 可以扩展此对象来控制上传头部

                // return false; // 阻止文件上传
            },
            onProgress: function onProgress(procent) {
                console.log(this, procent);
            },
            onSuccess: function onSuccess(ret) {
                console.log(this, ret);
            },
            onError: function onError(err) {
                console.log(this, err);
            }
        });

        // 缩略图预览
        document.querySelector('#uploaderFiles').addEventListener('click', function (e) {
            var target = e.target;

            while (!target.classList.contains('weui-uploader__file') && target) {
                target = target.parentNode;
            }
            if (!target) return;

            var url = target.getAttribute('style') || '';
            var id = target.getAttribute('data-id');

            if (url) {
                url = url.match(/url\((.*?)\)/)[1].replace(/"/g, '');
            }
            var gallery = _weui2.default.gallery(url, {
                className: 'custom-name',
                onDelete: function onDelete() {
                    _weui2.default.confirm('确定删除该图片？', function () {
                        --uploadCount;
                        uploadCountDom.innerHTML = uploadCount;

                        for (var i = 0, len = uploadList.length; i < len; ++i) {
                            var file = uploadList[i];
                            if (file.id == id) {
                                file.stop();
                                break;
                            }
                        }
                        target.remove();
                        gallery.hide();
                    });
                }
            });
        });

    })
</script>
</body>
</html>