<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- css reset -->
    <link rel="stylesheet" href="./css/reset.css">
    <!-- 公共common.css -->
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/menu.css">

    <!-- weui -->
    <link rel="stylesheet" href="./css/weui.css">
    <link rel="stylesheet" href="./css/jquery-weui.css">

    <!-- 适配 -->
    <script src="./js/common.js"></script>
    <title>云乐互联</title>
</head>
<body>
<!-- header start -->
<header>
    <div class="topbar-second">
        <span onclick="javascript:history.go(-1)"></span>订单详细
        <i class="back" onclick="javascript:history.go(-1)"></i>
    </div>
</header>
<!-- header end   -->

<!-- main start -->
<div id="main">
    <div class="weui-form-preview" v-if="types==0">
        <div class="weui-form-preview__hd">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">付款金额</label>
                <em class="weui-form-preview__value">¥{{info.payprice}}</em>
            </div>
        </div>
        <div class="weui-form-preview__bd">
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">类型</label>
                <span class="weui-form-preview__value">{{info.types}}</span>
                <!--<span class="weui-form-preview__value" v-if='info.type == 2'>服务号</span>-->
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">订单号</label>
                <span class="weui-form-preview__value" >{{info.ordernum}}</span>
                <!--<span class="weui-form-preview__value" v-if='info.isrz == 1'>个人认证</span>-->
                <!--<span class="weui-form-preview__value" v-if='info.isrz == 2'>企业认证</span>-->
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">手机号</label>
                <span class="weui-form-preview__value">{{info.phone}}</span>
                <!--<span class="weui-form-preview__value">{{info.fortype}}</span>-->
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">支付时间</label>
                <span class="weui-form-preview__value">{{info.paytime}}</span>
                <!--<span class="weui-form-preview__value">{{info.addtime}}</span>-->
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">商品名称</label>
                <span class="weui-form-preview__value">{{info.name}}</span>
            </div>
        </div>

    </div>
    <div class="weui-form-preview" v-if="types==1">
        <div class="weui-form-preview__hd">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">付款金额</label>
                <em class="weui-form-preview__value">¥{{info.payprice}}</em>
            </div>
        </div>
        <div class="weui-form-preview__bd">
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">类型</label>
                <span class="weui-form-preview__value" v-if="info.types==1">月卡会员</span>
                <span class="weui-form-preview__value" v-if="info.types==2">季卡会员</span>
                <span class="weui-form-preview__value" v-if="info.types==3">永久会员</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">订单号</label>
                <span class="weui-form-preview__value" >{{info.ordernum}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">支付时间</label>
                <span class="weui-form-preview__value">{{info.paytime}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">手机号</label>
                <span class="weui-form-preview__value">{{info.phone}}</span>
            </div>
        </div>

    </div>
    <div class="weui-form-preview" v-if="types==2">
        <div class="weui-form-preview__hd">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">金额</label>
                <em class="weui-form-preview__value">¥{{info.price}}</em>
            </div>
        </div>
        <div class="weui-form-preview__bd">
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">账号类型</label>
                <span class="weui-form-preview__value" v-if="info.type==1">订阅号</span>
                <span class="weui-form-preview__value" v-if="info.type==2">服务号</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">认证主体</label>
                <span class="weui-form-preview__value" v-if="info.isrz==0" >未认证</span>
                <span class="weui-form-preview__value" v-if='info.isrz == 1'>个人认证</span>
                <span class="weui-form-preview__value" v-if='info.isrz == 2'>企业认证</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">所属类目</label>
                <span class="weui-form-preview__value">{{info.fortype}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">粉丝数量</label>
                <span class="weui-form-preview__value">{{info.fansnum}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">注册时间</label>
                <span class="weui-form-preview__value">{{info.addtime}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">商品</label>
                <span class="weui-form-preview__value">{{info.zhname}}</span>
            </div>
        </div>

    </div>
    <div class="weui-form-preview" v-if="types==3">
        <div class="weui-form-preview__hd">
            <div class="weui-form-preview__item">
                <label class="weui-form-preview__label">付款金额</label>
                <em class="weui-form-preview__value">¥{{info.payprice}}</em>
            </div>
        </div>
        <div class="weui-form-preview__bd">
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">类型</label>
                <span class="weui-form-preview__value">{{types}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">订单号</label>
                <span class="weui-form-preview__value" >{{info.ordernum}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">支付时间</label>
                <span class="weui-form-preview__value">{{info.paytime}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">手机号</label>
                <span class="weui-form-preview__value">{{info.phone}}</span>
            </div>
            <div class="weui-form-preview__bd">
                <label class="weui-form-preview__label">商品</label>
                <span class="weui-form-preview__value">增值服务</span>
            </div>
        </div>

    </div>
    <!-- main end   -->
    <!-- footer start -->
</div>
<!-- footer end -->
<!-- jquery -->
<script src="./js/jquery-2.1.4.js"></script>
<script src="./js/jquery-weui.min.js"></script>
<script src="./js/swiper.min.js"></script>
<scritp src="./js/public.js"></scritp>
<script src="./js/vue.js"></script>
<script src="./js/data.js"></script>
<script src="./js/axios.js"></script>
<!---->
<script src="./js/weui.min.js"></script>
<script>
    // import {
    //     ImagePreview
    // } from 'https://cdn.jsdelivr.net/npm/vant@1.5/lib/vant.min.js';
    var vm = new Vue({
        el: "#main",
        data: {
            info:{},
            types:0
        },
        mounted() {
            this.getinfo();
        },
        methods: {
            getinfo() {
                let that = this;
                var id = getUrlParm('id');
                var types = getUrlParm('types');
                this.types=types
                axios.post('http://wxpay.possji.cn/yikehao/getOrderdetail', {
                    id: id,
                    types:types
                })
                //then里面跟一个成功回调函数
                    .then(function (resp) {
                        if (resp.data.code) {
                            that.info = resp.data.data
                            console.log(that.info);

                        } else {
                            $.toast("无法加载", "text");
                        }

                    })
                    // catch中跟一个失败回调函数
                    .catch(function (error) {
                        console.log(error);
                    });
            }

        }
    })
    function getUrlParm(name) {
        //获取url方法 编辑传来的参数
        //     //之前decodeURI是用的unescape() 有时候会取汉字乱码
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return decodeURI(r[2]);
        return null;
    }
</script>
</body>
</html>